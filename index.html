<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MetaClass Booking System</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="Admin/site-enhanced.css" />
</head>
<body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg metaclass-navbar">
        <div class="container">
            <a class="nav-link" href="/Admin/Dashboard.html" data-load="Dashboard.html">
                <span class="brand-text">METACLASS</span>   
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">

                    <a class="nav-link" href="#" data-load="dashboard.html">
                        <i class="fas fa-home"></i> Dashboard
                    </a>
                    
                    <a class="nav-link" href="#" data-load="booking-create.html">
                        <i class="fas fa-plus-circle"></i> NewBooking
                    </a>
                    
                    <a class="nav-link" href="#" data-load="booking-list.html">
                        <i class="fas fa-calendar-alt"></i> MyBookings
                    </a>
                    
                    <!-- ADMIN DROPDOWN -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
                            <i class="fas fa-cog"></i> Admin
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="admin-panel.html"><i class="fas fa-tachometer-alt"></i> AdminPanel</a></li>
                            <li><a class="dropdown-item" href="admin-users.html"><i class="fas fa-users"></i> ManageUsers</a></li>
                            <li><a class="dropdown-item" href="admin-classrooms.html"><i class="fas fa-door-open"></i> Classrooms</a></li>
                            <li><a class="dropdown-item" href="admin-equipment.html"><i class="fas fa-tools"></i> Equipment</a></li>
                            <li><a class="dropdown-item" href="admin-schedules.html"><i class="fas fa-calendar-week"></i> Schedules</a></li>
                        </ul>
                    </li>

                    <!-- ACCOUNT -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle"></i> Account
                        </a>

                        <ul class="dropdown-menu">
                            <li>
                                <a class="dropdown-item" href="#" id="themeToggle">
                                    <i class="fas fa-moon"></i> Dark/Light Mode
                                </a>
                            </li>

                            <li>
                                <div class="dropdown-item">
                                    <i class="fas fa-language"></i>
                                    <select id="languageSelect" class="form-select form-select-sm d-inline-block w-auto ms-2">
                                        <option value="en">English</option>
                                        <option value="ru">Русский</option>
                                        <option value="hy">Հայերեն</option>
                                    </select>
                                </div>
                            </li>

                            <li><hr class="dropdown-divider"></li>

                            <li>
                                <a class="dropdown-item" href="change-password.html">
                                    <i class="fas fa-key"></i> ChangePassword
                                </a>
                            </li>

                            <li><hr class="dropdown-divider"></li>

                            <li>
                                <a class="dropdown-item" href="#" id="logoutBtn">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </a>
                            </li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link position-relative" href="#" id="notificationBell">
                            <i class="fas fa-bell"></i>
                            <span class="badge bg-danger position-absolute top-0 start-100 translate-middle" id="notificationCount" style="display:none;">0</span>
                        </a>
                    </li>

                </ul>
            </div>
        </div>
    </nav>


    <!-- ALERTS -->
    <div class="container mt-3" id="alertArea" style="display:none;">
        <div class="alert alert-dismissible fade show" id="alertBox">
            <i class="fas" id="alertIcon"></i>
            <span id="alertMessage"></span>
            <button class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    </div>


    <!-- PAGE CONTENT -->
    <main id="pageContent">
        <!-- React or JS content will load here -->
    </main>


    <!-- FOOTER -->
    <footer class="metaclass-footer mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start">
                    <p class="mb-0 text-white">&copy; 2025 - MetaClass University Booking System</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="mb-0 text-white-50">Powered by MetaClass Technology</p>
                </div>
            </div>
        </div>
    </footer>


    <!-- NOTIFICATIONS MODAL -->
    <div class="modal fade" id="notificationModal">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-metaclass-blue text-white">
                    <h5 class="modal-title"><i class="fas fa-bell"></i> Notifications</h5>
                    <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body" id="notificationList">
                    <p class="text-center text-muted">No notifications</p>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-sm btn-secondary" id="markAllRead">Mark All as Read</button>
                    <button class="btn btn-sm btn-metaclass-blue" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

    <script>
        // LOGOUT
        document.getElementById("logoutBtn").addEventListener("click", () => {
            // JS logout logic
            alert("Logged out (JS version)");
        });

        // ALERT SYSTEM
        function showAlert(type, msg) {
            const area = document.getElementById("alertArea");
            const box = document.getElementById("alertBox");
            const icon = document.getElementById("alertIcon");
            const text = document.getElementById("alertMessage");

            area.style.display = "block";

            if (type === "success") {
                box.className = "alert alert-success alert-dismissible fade show";
                icon.className = "fas fa-check-circle";
            } else {
                box.className = "alert alert-danger alert-dismissible fade show";
                icon.className = "fas fa-exclamation-circle";
            }

            text.innerText = msg;
        }
       
    // Load page into #pageContent
    function loadPage(page) {
        fetch(page)
            .then(res => res.text())
            .then(html => {
                document.getElementById("pageContent").innerHTML = html;

                // Load JS file for the page (if exists)
                if (page === "dashboard.html") {
                    const script = document.createElement("script");
                    script.src = "dashboard.js";
                    document.body.appendChild(script);
                }
            });
    }

   


function loadPage(page) {
    fetch(page)
        .then(res => {
            if (!res.ok) throw new Error("Page not found: " + page);
            return res.text();
        })
        .then(html => {
            document.getElementById("pageContent").innerHTML = html;

            // reattach data-load listeners inside loaded page
            setupNavigation();
        })
        .catch(err => console.error(err));
}

function setupNavigation() {
    document.querySelectorAll("[data-load]").forEach(link => {
        if (link.dataset.bound) return;  // avoid duplicate bindings
        link.dataset.bound = "1";

        link.addEventListener("click", (e) => {
            e.preventDefault();
            const page = link.getAttribute("data-load");
            loadPage(page);
        });
    });
}

// At startup: enable listeners
setupNavigation();

// Default page on first load
loadPage("dashboard.html");


</script>

   

</body>
</html>
